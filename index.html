<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine üíñ</title>
<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;margin:0;padding:0;}
body{height:100vh;overflow:hidden;background:#f2f2f7;display:flex;justify-content:center;align-items:center;}

/* CHAT */
#chat{display:flex;flex-direction:column;width:100%;max-width:390px;height:100vh;padding:10px;background:#f2f2f7;overflow:hidden;}
.header{text-align:center;font-weight:600;margin-bottom:10px;color:#111;}
.chat-area{flex:1;overflow-y:auto;display:flex;flex-direction:column;}
.bubble{max-width:70%;padding:10px 14px;border-radius:18px;margin:6px 0;line-height:1.3;animation:fadeIn .3s ease forwards;opacity:0;}
.me{align-self:flex-end;background:#d1d1d6;color:#000;border-bottom-right-radius:4px;}
.her{align-self:flex-start;background:#0a84ff;color:#fff;border-bottom-left-radius:4px;}
.time{font-size:.7rem;margin:2px 0;}
.time.me{color:#555;}
.time.her{color:#0af;}
.typing{font-size:.9rem;color:#666;font-style:italic;margin:5px 0;}

/* QUESTION CARD */
#card{position:fixed;inset:0;display:none;justify-content:center;align-items:center;background:radial-gradient(circle at top,#ff9aa2,#ff4d6d);}
.cardBox{background:rgba(255,255,255,.15);backdrop-filter:blur(14px);border-radius:24px;padding:28px;text-align:center;width:90%;max-width:360px;color:#fff;}
h1{font-size:1.8rem;margin-bottom:20px;}
.buttons{position:relative;height:90px;}
button{border:none;padding:12px 26px;border-radius:999px;font-size:1rem;cursor:pointer;transition:.2s ease;}
#yesBtn{background:linear-gradient(135deg,#ff758f,#ff4d6d);color:#fff;box-shadow:0 10px 25px rgba(255,77,109,.6);}
#noBtn{position:absolute;background:#fff;color:#ff4d6d;left:50%;transform:translateX(-50%);}

/* FINAL SCREENS */
.screen{position:fixed;inset:0;display:none;justify-content:center;align-items:center;text-align:center;padding:30px;font-size:1.2rem;z-index:10;}
#yesScreen{background:linear-gradient(135deg,#ff758f,#ff1e56);color:#fff;}
#yesScreen h2{margin-bottom:10px;}
#yesScreen p{margin-bottom:5px;font-weight:600;font-size:1.1rem;}
#noScreen{background:linear-gradient(135deg,#111,#333);color:#fff;}

/* HEARTS */
.heart{position:absolute;font-size:20px;animation:float 5s linear infinite;opacity:.8;}
@keyframes float{to{transform:translateY(-120vh);opacity:0;}}
@keyframes fadeIn{to{opacity:1;}}
</style>
</head>
<body>

<!-- CHAT -->
<div id="chat">
  <div class="header">Sophia</div>
  <div class="chat-area" id="chatArea"></div>
</div>

<!-- QUESTION -->
<div id="card">
  <div class="cardBox">
    <h1>Sophia, will you be my Valentine? üíñ</h1>
    <div class="buttons">
      <button id="yesBtn">Yes üíï</button>
      <button id="noBtn">No üòè</button>
    </div>
  </div>
</div>

<!-- YES SCREEN -->
<div id="yesScreen" class="screen">
  <div>
    <h2>üíå Invitation üíå</h2>
    <p>Awesome! Since you said yes, I guess that makes you stuck with me as my Valentine üíñ</p>
    <p>Save the Date: February 15, 2026</p>
    <p style="opacity:.8;font-size:1rem;">üì∏ Screenshot so you won't forget</p>
  </div>
</div>

<!-- NO SCREEN -->
<div id="noScreen" class="screen">
  <div>
    <h2>ü•∫</h2>
    <p>I understand‚Ä¶<br>Maybe in another universe, Sophia and Daniel would be something more.</p>
  </div>
</div>

<!-- Meme placeholder -->
<img id="memePop" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;display:none;z-index:50;"/>

<!-- Sounds -->
<audio id="sadSound" src="media/sad.mp3"></audio>
<audio id="yesSound" src="media/yes.mp3"></audio>

<script>
// CHAT FLOW
const chatArea=document.getElementById("chatArea");
const chat=document.getElementById("chat");
const card=document.getElementById("card");
const yesScreen=document.getElementById("yesScreen");
const noScreen=document.getElementById("noScreen");
const yesBtn=document.getElementById("yesBtn");
const noBtn=document.getElementById("noBtn");
const memePop=document.getElementById("memePop");
const sadSound=document.getElementById("sadSound");
const yesSound=document.getElementById("yesSound");

let yesScale=1;
let noClickCount=0;

// Chat messages
const messages=[
  {from:"her", text:"Hey Daniel üòä"},
  {from:"me", text:"Hi Sophia"},
  {from:"her", text:"What's up?"},
  {from:"me", text:"I‚Äôve been wanting to ask you something‚Ä¶"},
  {from:"her", text:"Oh really?"},
  {from:"me", text:"Can I ask you properly if you‚Äôll be my Valentine?"}
];

function addMessage(from,text){
  const bubble=document.createElement("div");
  bubble.className="bubble "+(from==="me"?"me":"her");
  bubble.textContent=text;
  chatArea.appendChild(bubble);
  const time=document.createElement("div");
  time.className="time "+(from==="me"?"me":"her");
  time.textContent=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  chatArea.appendChild(time);
  chatArea.scrollTop=chatArea.scrollHeight;
}

function showTyping(text,from){
  return new Promise(resolve=>{
    const tdiv=document.createElement("div");
    tdiv.className="typing";
    tdiv.textContent=text;
    chatArea.appendChild(tdiv);
    chatArea.scrollTop=chatArea.scrollHeight;
    setTimeout(()=>{
      tdiv.remove();
      addMessage(from,text);
      resolve();
    },1200);
  });
}

async function startChat(){
  for(let i=0;i<messages.length;i++){
    const msg=messages[i];
    if(msg.from==="her"){
      await showTyping(msg.text,msg.from);
    } else {
      addMessage(msg.from,msg.text);
    }
    await new Promise(r=>setTimeout(r,600));
  }
  setTimeout(()=>{chat.style.display="none";card.style.display="flex"},800);
}

// START CHAT
startChat();

// NO BUTTON BEHAVIOR
function moveNo(){
  const x=Math.random()*(window.innerWidth-120);
  const y=Math.random()*(window.innerHeight-120);
  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";

  yesScale+=0.15;
  yesBtn.style.transform=`scale(${yesScale})`;

  noClickCount++;
  if(noClickCount%3===0){ // every 3 clicks show sad
    memePop.src='media/sad-meme.gif';
    memePop.style.display='block';
    sadSound.play();
    setTimeout(()=>memePop.style.display='none',3000);
  }
}
noBtn.addEventListener("mouseover",moveNo);
noBtn.addEventListener("touchstart",moveNo);
noBtn.addEventListener("click",moveNo);

// YES BUTTON CLICK
yesBtn.addEventListener("click",()=>{
  yesScreen.style.display="flex";
  card.style.display="none";
  yesSound.play();
});

// FLOATING HEARTS
function heart(){
  const h=document.createElement("div");
  h.className="heart";
  h.innerHTML="‚ù§Ô∏è";
  h.style.left=Math.random()*100+"vw";
  h.style.bottom="-20px";
  h.style.fontSize=Math.random()*20+15+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),5000);
}
setInterval(heart,400);
</script>
</body>
</html>
