<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Sophia üíñ</title>

<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}
body{
  margin:0;height:100vh;background:#000;color:#fff;
  display:flex;justify-content:center;align-items:center;
  overflow:hidden;
}

/* LOADING SCREEN */
#loading{
  position:fixed;inset:0;background:#000;
  display:flex;flex-direction:column;justify-content:center;align-items:center;
  z-index:100;
}
.loader{
  width:50px;height:50px;border:3px solid #333;border-top:3px solid #ff4d6d;
  border-radius:50%;animation:spin 1s linear infinite;margin-bottom:15px;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* iMESSAGE CHAT */
#chat{
  width:100%;max-width:390px;height:100vh;
  display:none;flex-direction:column;
  padding:14px;background:#f2f2f7;color:#000;
}
.header{
  text-align:center;font-weight:600;margin-bottom:10px;color:#111;
}
.chat-area{
  flex:1;overflow-y:auto;display:flex;flex-direction:column;
}
.bubble{
  max-width:70%;padding:10px 14px;border-radius:18px;margin:6px 0;
  font-size:1rem;line-height:1.3;animation:fadeIn .3s ease forwards;
  opacity:0;
}
.me{align-self:flex-end;background:#0a84ff;color:#fff;border-bottom-right-radius:4px}
.her{align-self:flex-start;background:#e5e5ea;color:#000;border-bottom-left-radius:4px}
.time{
  font-size:.7rem;color:#888;margin:2px 0;
}
.typing{
  font-size:.9rem;color:#666;margin:5px 0;font-style:italic;
}
@keyframes fadeIn{to{opacity:1}}

/* QUESTION SCREEN */
#card{
  position:fixed;inset:0;display:none;justify-content:center;align-items:center;
  background:radial-gradient(circle at top,#ff9aa2,#ff4d6d);
}
.cardBox{
  background:rgba(255,255,255,.15);backdrop-filter:blur(16px);
  border-radius:24px;padding:28px;text-align:center;
  width:90%;max-width:360px;color:#fff;
}
h1{font-size:1.8rem;margin-bottom:20px}
.buttons{position:relative;height:90px}
button{
  border:none;padding:12px 26px;border-radius:999px;font-size:1rem;
  cursor:pointer;transition:.2s ease;
}
#yesBtn{
  background:linear-gradient(135deg,#ff758f,#ff4d6d);
  color:#fff;box-shadow:0 10px 25px rgba(255,77,109,.6);
}
#noBtn{
  position:absolute;background:#fff;color:#ff4d6d;left:50%;
  transform:translateX(-50%);
}

/* FINAL SCREENS */
.screen{
  position:fixed;inset:0;display:none;justify-content:center;align-items:center;
  text-align:center;padding:30px;font-size:1.2rem;z-index:10;
}
#yesScreen{
  background:linear-gradient(135deg,#ff758f,#ff1e56);
}
#noScreen{
  background:linear-gradient(135deg,#111,#333);
}

/* floating hearts */
.heart{
  position:absolute;font-size:20px;animation:float 5s linear infinite;opacity:.8
}
@keyframes float{to{transform:translateY(-120vh);opacity:0}}
</style>
</head>
<body>

<!-- LOADING -->
<div id="loading">
  <div class="loader"></div>
  <div>Preparing something special for Sophia...</div>
</div>

<!-- CHAT -->
<div id="chat">
  <div class="header">Sophia</div>
  <div class="chat-area" id="chatArea"></div>
</div>

<!-- QUESTION -->
<div id="card">
  <div class="cardBox">
    <h1>Sophia, will you be my Valentine? üíñ</h1>
    <div class="buttons">
      <button id="yesBtn">Yes üíï</button>
      <button id="noBtn">No üòè</button>
    </div>
  </div>
</div>

<!-- YES SCREEN -->
<div id="yesScreen" class="screen">
  <div>
    <h2>üíò Sophia & Daniel üíò</h2>
    <p id="loveLetter"></p>
    <p style="margin-top:20px;font-size:1rem;opacity:.8">
      üì∏ Screenshot this moment.
    </p>
  </div>
</div>

<!-- NO SCREEN -->
<div id="noScreen" class="screen">
  <div>
    <h2>ü•∫</h2>
    <p>
      I understand‚Ä¶<br><br>
      Maybe in another universe,<br>
      Sophia and Daniel would be something more.
    </p>
  </div>
</div>

<audio id="bgm" loop>
  <source src="https://cdn.pixabay.com/audio/2022/10/03/audio_9c2c2b3c6a.mp3">
</audio>

<script>
const loading = document.getElementById("loading");
const chat = document.getElementById("chat");
const chatArea = document.getElementById("chatArea");
const card = document.getElementById("card");
const yesScreen = document.getElementById("yesScreen");
const noScreen = document.getElementById("noScreen");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const bgm = document.getElementById("bgm");
const loveLetter = document.getElementById("loveLetter");

let yesScale=1,noScale=1;

// CHAT SCRIPT (iMessage style)
const messages = [
  {from:"me", text:"Hey Sophia"},
  {from:"her", text:"Hi Daniel üòä"},
  {from:"me", text:"Can I tell you something?"},
  {from:"her", text:"Sure"},
  {from:"me", text:"I‚Äôve been thinking about this for a while..."},
  {from:"me", text:"You make everything feel lighter when you‚Äôre around."},
  {from:"me", text:"So I just want to ask you properly."}
];

function addMessage(from,text){
  const bubble=document.createElement("div");
  bubble.className="bubble "+(from==="me"?"me":"her");
  bubble.textContent=text;
  chatArea.appendChild(bubble);

  const time=document.createElement("div");
  time.className="time "+(from==="me"?"me":"her");
  time.textContent=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  chatArea.appendChild(time);

  chatArea.scrollTop=chatArea.scrollHeight;
}

function showTyping(){
  const typing=document.createElement("div");
  typing.className="typing";
  typing.textContent="Sophia is typing...";
  chatArea.appendChild(typing);
  chatArea.scrollTop=chatArea.scrollHeight;
  return typing;
}

async function startChat(){
  for(let i=0;i<messages.length;i++){
    const msg=messages[i];
    if(msg.from==="her"){
      const t=showTyping();
      await new Promise(r=>setTimeout(r,1200));
      t.remove();
    }
    addMessage(msg.from,msg.text);
    await new Promise(r=>setTimeout(r,700));
  }
  setTimeout(()=>{chat.style.display="none";card.style.display="flex"},1000);
}

// LOADING ‚Üí CHAT
setTimeout(()=>{
  loading.style.display="none";
  chat.style.display="flex";
  startChat();
},2500);

// NO BUTTON BEHAVIOR
function moveNo(){
  const x=Math.random()*(window.innerWidth-120);
  const y=Math.random()*(window.innerHeight-120);
  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";

  noScale-=.08;if(noScale<.4)noScale=.4;
  yesScale+=.12;
  noBtn.style.transform=`scale(${noScale})`;
  yesBtn.style.transform=`scale(${yesScale})`;
}
noBtn.addEventListener("mouseover",moveNo);
noBtn.addEventListener("touchstart",moveNo);

// CLICK NO ‚Üí SAD CINEMATIC
noBtn.addEventListener("click",()=>{
  card.style.display="none";
  noScreen.style.display="flex";
});

// CLICK YES ‚Üí LOVE LETTER
yesBtn.addEventListener("click",()=>{
  bgm.play();
  card.style.display="none";
  yesScreen.style.display="flex";

  loveLetter.innerHTML = `
    Sophia,<br><br>
    From the moment I started talking to you,
    I felt something different.<br><br>
    You have this quiet way of making everything feel calm and beautiful.
    I don‚Äôt know where this will lead,
    but I know I want to walk there with you.<br><br>
    ‚Äî Daniel üíñ
  `;
});

// floating hearts
function heart(){
  const h=document.createElement("div");
  h.className="heart";
  h.innerHTML="‚ù§Ô∏è";
  h.style.left=Math.random()*100+"vw";
  h.style.bottom="-20px";
  h.style.fontSize=Math.random()*20+15+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),5000);
}
setInterval(heart,400);
</script>

</body>
</html>
